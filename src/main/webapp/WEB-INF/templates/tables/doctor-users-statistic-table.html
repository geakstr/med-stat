<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="table">

<table class="table-hover" style="width: 48%; float: left;">
    <thead>
	    <tr>
	        <th>Имя</th>
	        <th>
            <select id="gyms-select">
              <option value="-1">Упражнения</option>
              <option th:each="gym : ${userGyms}" th:text="${gym.title}" th:value="${gym.id}" th:selected="${gym.id} == ${gymId}"></option>
            </select>
          </th>
	        <th>Прогресс</th>
	        <th>Дата</th>
	    </tr>
    </thead>
    <tbody>
	    <tr th:each="s:${userStats}">
	        <td th:text="${s.userGym.user.lastName} + ', ' + ${s.userGym.user.firstName}"></td>
	        <td th:text="${s.userGym.gymnastic.title}"></td>
	        <td th:text="${s.percent}" style="width: 1px; text-align: right;"></td>
	        <td th:text="${#dates.format(s.date, 'dd/MM/yyyy')}" style="width: 1px;"></td>
	    </tr>
    </tbody>
</table>

</div>

<div th:fragment="scripts">
<script>
$(document).ready(function() {
  var $gymsSelect = $("#gyms-select");
  $gymsSelect.change(function() {
    var gymId = parseInt($(this).val());
    if (gymId === -1) {
        window.location.href = "http://localhost:8080/lk/user";
    } else {
        window.location.href = "http://localhost:8080/lk/user/gym/" + gymId;
    }
    return true;
  });
});

</script>
</div>
</body>
</html>